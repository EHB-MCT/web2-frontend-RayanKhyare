(()=>{"use strict";var e,t={965:(e,t,a)=>{a.d(t,{q1:()=>n});const n="1f10bd3195bf40e7b89a3c607aefcdef"}},a={};function n(e){var o=a[e];if(void 0!==o)return o.exports;var s=a[e]={exports:{}};return t[e](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=n(965),window.onload=function(){function t(){const e=document.getElementsByClassName("gameBookmarked");console.log(e),[].slice.call(e).forEach((e=>{e.addEventListener("click",(function(t){setTimeout(500),t.preventDefault();let a=e.id;window.location.href=`./gameinfo.html?id=${a}`}))}))}!function(){let e=document.getElementById("bookmarkedcontainer"),a="",n=sessionStorage.getItem("userId");fetch(`https://web2-courseproject-rayankhyare.herokuapp.com/games/bookmarks/${n}`,{method:"GET"}).then((e=>e.json())).then((n=>{for(let t=n.length-1;t>=0;t--)a=`\n                        <div class="allgamesection">\n                        <img class="img" src="${n[t].gameImg}" alt="Avatar" style="width:100%">\n    \n                        <div class="allgametext">\n                            <p class="allgametitle "><b class="gameBookmarked" id="${n[t].gameId}">${n[t].gameName}</b><i class="material-icons delete game" id="${n[t]._id}">delete</i></p>\n                            <p><b class="allgamerelease">Release date : ${n[t].gameRelease}</b></p>\n                        </div>\n                    </div>\n                       `,e.insertAdjacentHTML("beforeend",a);!function(){const e=document.getElementsByClassName("delete");[].slice.call(e).forEach((e=>{e.addEventListener("click",(function(t){fetch(`https://web2-courseproject-rayankhyare.herokuapp.com/games/${e.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{setTimeout(window.location.reload(),100)}))}))}))}(),t()}))}(),document.getElementById("searchinput").addEventListener("keyup",(async function(a){if(a.preventDefault(),"Enter"!==a.key)return;const n=document.getElementById("searchinput").value.replace(/ /g,"-").toLowerCase();let o=await fetch(`https://api.rawg.io/api/games?search=${n}&key=${e.q1}`);if(console.log(o.ok),o.ok){let e=(await o.json()).results,a="";e.forEach((e=>{let n=e.name,o=e.background_image,s=e.released,l=document.getElementById("bookmarkedcontainer");a+=`\n                    <div class="allgamesection">\n            <img class="img" src="${o}" alt="Avatar" style="width:100%">\n\n            <div class="allgametext">\n                <p class="allgametitle" ><b class="title game">${n}</b><i class="material-icons bookmark game" id="${e.id}">bookmark_border</i></p>\n                <p><b class="allgamerelease">Release date : <b class="allgamereleasedate" id="allgamereleasedate">${s}</b></b></p>\n\n            </div>\n\n        </div>`,l.innerHTML=a,function(){const e=document.getElementsByClassName("bookmark");Array.from(e).forEach((e=>{e.addEventListener("click",(function(t){let a=sessionStorage.getItem("userId"),n=e.id,o=e.parentElement.parentElement.parentElement.firstElementChild.src,s=e.previousSibling.outerText,l=e.parentElement.parentElement.lastElementChild.lastElementChild.lastElementChild.outerText;fetch("https://web2-courseproject-rayankhyare.herokuapp.com/games",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a,gameId:n,gameImg:o,gameName:s,gameRelease:l})}).then((e=>e.json())),e.innerHTML="bookmark"}))}))}(),t()}))}else alert("error: "+response.status)}))}})();