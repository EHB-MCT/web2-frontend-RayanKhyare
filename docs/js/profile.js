window.onload=function(){!function(){let e=sessionStorage.getItem("userId");fetch(`https://web2-courseproject-rayankhyare.herokuapp.com/users/${e}`,{method:"GET"}).then((e=>e.json())).then((e=>{console.log(e);let t=document.getElementById("profilcontainer"),s="",n=e._id,o=e.firstname,a=e.lastname,l=e.email,i=e.password;s+=` <h2 class="textprofil" id="${n} textprofil">First name : </h2>\n            <h3 class="firstnamestyle" id="firstnamestyle">${o}</h3>\n            <h2 class="textprofil">Last Name : </h2>\n           \n            <h3 class="firstnamestyle" id="lastnamestyle" >${a}</h3>\n          \n            <h2 class="textprofil">Email : </h2>\n            <div class="divEmailEdit">\n            <h3 class="firstnamestyle">${l}</h3> <i class="material-icons updateacc" id="updateacc">create</i>\n            </div>\n            <div class="emailInput" id="emailInput">\n\n            <form class="emailChangeForm" id="emailChangeForm">\n            <input type="text" class="emailInputForm" id="emailInputForm" name="email" placeholder="New email">\n            <button type="submit" class="submitEmailChange" id="submitEmailChange">Change email</button>\n\n            </form>\n            </div>\n            <h2 class="textprofil">Password : </h2>\n            <div class="divPasswordEdit">\n            <h3 class="firstnamestyle"><a id="passwordShow">Change password</a></h3><i class="material-icons updatepassword" id="updatepassword">create</i>\n            </div>\n\n            <div class="passwordInput" id="passwordInput">\n            <form class="passwordChangeForm" id="passwordChangeForm">\n            <input type="text" class="passwordInputForm" id="passwordInputForm" name="password" placeholder="New password">\n            <button type="submit" class="submitpasswordChange" id="submitpasswordChange">Change password</button>\n\n            </form>\n            </div>\n            `,t.insertAdjacentHTML("afterbegin",s),function(e,t,s){document.getElementById("emailChangeForm").addEventListener("submit",(n=>{console.log(n.target.email),n.preventDefault();let o=sessionStorage.getItem("userId"),a=e;console.log(a);let l=t;console.log(l);let i=n.target.email.value;console.log(i);let d=s;console.log(i);const r={firstname:a,lastname:l,email:i,password:d};fetch(`https://web2-courseproject-rayankhyare.herokuapp.com/users/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>{e.json()})).then((e=>{console.log(e),null==e&&location.reload()}))}))}(o,a,i),function(e,t,s){document.getElementById("passwordChangeForm").addEventListener("submit",(n=>{console.log(n.target.password),n.preventDefault();let o=sessionStorage.getItem("userId"),a=e;console.log(a);let l=t;console.log(l);let i=s;console.log(i);let d=n.target.password.value;console.log(i);const r={firstname:a,lastname:l,email:i,password:d};fetch(`https://web2-courseproject-rayankhyare.herokuapp.com/users/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>{e.json()})).then((e=>{console.log(e),null==e&&location.reload()}))}))}(o,a,l),document.getElementById("updateacc").addEventListener("click",(function(e){document.getElementById("emailInput").style.display="block"})),document.getElementById("updatepassword").addEventListener("click",(function(e){document.getElementById("passwordInput").style.display="block"})),document.getElementById("deleteaccsure").addEventListener("click",(function(e){console.log("lets gooo");let t=sessionStorage.getItem("userId");fetch(`https://web2-courseproject-rayankhyare.herokuapp.com/users/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{window.location.href="./../index.html"}))}))}))}(),document.getElementById("deleteaccbtn").addEventListener("click",(function(e){console.log("lets gooo"),document.getElementById("deleteaccsure").style.display="block"})),document.getElementById("discaccbtn").addEventListener("click",(function(e){sessionStorage.removeItem("userId"),window.location.href="./../index.html"}))};