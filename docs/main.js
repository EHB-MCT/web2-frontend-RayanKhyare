(()=>{"use strict";window.onload=function(){const e="0f742c4d7ba64f8f87a469a43cdc46aa";function a(){const e=document.getElementsByClassName("bookmark");Array.from(e).forEach((e=>{e.addEventListener("click",(function(a){let t=e.id,s=e.parentElement.parentElement.parentElement.firstElementChild.src,n=e.previousSibling.outerText,l=e.parentElement.parentElement.lastElementChild.lastElementChild.lastElementChild.outerText;fetch("https://web2-courseproject-rayankhyare.herokuapp.com/games",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"5",gameId:t,gameImg:s,gameName:n,gameRelease:l})}).then((e=>e.json())),alert("Game bookmarked !")}))}))}async function t(){const a=await fetch(`https://api.rawg.io/api/games?key=${e}`);return await a.json()}setTimeout((function(){const e=document.getElementsByClassName("bookmark");Array.from(e).forEach((e=>{e.addEventListener("click",(function(a){console.log(e);let t=e.id,s=e.parentElement.parentElement.parentElement.firstElementChild.src,n=e.previousSibling.outerText,l=e.parentElement.parentElement.lastElementChild.lastElementChild.lastElementChild.outerText;fetch("https://web2-courseproject-rayankhyare.herokuapp.com/games",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"5",gameId:t,gameImg:s,gameName:n,gameRelease:l})}).then((e=>e.json())),e.innerHTML="bookmark"}))}))}),500),setTimeout((function(){const e=document.getElementsByClassName("delete");[].slice.call(e).forEach((e=>{e.addEventListener("click",(function(a){fetch(`https://web2-courseproject-rayankhyare.herokuapp.com/games/${e.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{setTimeout(window.location.reload(),100)}))}))}))}),500),function(){let e=document.getElementById("bookmarkedcontainer"),a="";fetch("https://web2-courseproject-rayankhyare.herokuapp.com/games",{method:"GET"}).then((e=>e.json())).then((t=>{for(let s=t.length-1;s>=0;s--)a=`\n                    <div class="allgamesection">\n                    <img class="img" src="${t[s].gameImg}" alt="Avatar" style="width:100%">\n\n                    <div class="allgametext">\n                        <p class="allgametitle "><b class="game">${t[s].gameName}</b><i class="material-icons delete game" id="${t[s]._id}">delete</i></p>\n                        <p><b class="allgamerelease">Release date : ${t[s].gameRelease}</b></p>\n                    </div>\n                </div>\n                   `,e.insertAdjacentHTML("beforeend",a)}))}(),document.getElementById("searchinput").addEventListener("keyup",(async function(t){if(t.preventDefault(),"Enter"!==t.key)return;const s=document.getElementById("searchinput").value.replace(/ /g,"-").toLowerCase();let n=await fetch(`https://api.rawg.io/api/games?search=${s}&key=${e}`);if(n.ok){let e=(await n.json()).results;console.log(e);let a="";e.forEach((e=>{let t=e.name,s=e.background_image,n=e.released,l=document.getElementById("allgamescontainer");a+=`\n                    <div class="allgamesection">\n            <img class="img" src="${s}" alt="Avatar" style="width:100%">\n\n            <div class="allgametext">\n                <p class="allgametitle"><b class="title game">${t}</b><i class="material-icons bookmark" id="${e.id}">bookmark_border</i></p>\n                <p><b class="allgamerelease">Release date : <b class="allgamereleasedate" id="allgamereleasedate">${n}</b></b></p>\n            </div>\n        </div>`,l.innerHTML=a}))}else alert("error: "+response.status);setTimeout(a,500)})),document.getElementById("searchinput").addEventListener("keyup",(async function(t){if(t.preventDefault(),"Enter"!==t.key)return;const s=document.getElementById("searchinput").value.replace(/ /g,"-").toLowerCase();let n=await fetch(`https://api.rawg.io/api/games?search=${s}&key=${e}`);if(console.log(n.ok),n.ok){let e=(await n.json()).results,a="";e.forEach((e=>{let t=e.name,s=e.background_image,n=e.released,l=document.getElementById("bookmarkedcontainer");a+=`\n                    <div class="allgamesection">\n            <img class="img" src="${s}" alt="Avatar" style="width:100%">\n\n            <div class="allgametext">\n                <p class="allgametitle" ><b class="title game">${t}</b><i class="material-icons bookmark game" id="${e.id}">bookmark_border</i></p>\n                <p><b class="allgamerelease">Release date : <b class="allgamereleasedate" id="allgamereleasedate">${n}</b></b></p>\n\n            </div>\n\n        </div>`,l.innerHTML=a}))}else alert("error: "+response.status);setTimeout(a,500)})),setTimeout((function(){const a=document.getElementsByClassName("game");[].slice.call(a).forEach((a=>{a.addEventListener("click",(function(e){setTimeout(500),e.preventDefault();let t=a.nextSibling.id;console.log(t),window.location.href=`./gameinfo.html?id=${t}`})),async function(){const a=window.location.search,t=new URLSearchParams(a).get("id");console.log(t);fetch(`https://api.rawg.io/api/games/${t}?key=${e}`).json().then((e=>{e.results.forEach((e=>{let a=e.name,t=(e.background_image,e.metacritic),s=(e.released,document.getElementById("bigcontainergame")),n="";console.log(s),n+=`   <div class="bodycontainergame">\n            <div class="leftsidegameinfo">\n                <div class="gameheader">\n                    <div class="nameandscore">\n                        <h2 class="gamename">${a}</h2>\n                        <h2 class="metascore">${t}</h2>\n                    </div>\n                    <h3 class="gamestudio">Test</h3>\n                </div>\n                <h2 class="about">About</h2>\n                <p class="gameinfo">Test</p>\n                <h2 class="releasedate_h2">Release date</h2>\n                <h3 class="releasedate_h3">Test</h3>\n\n                <div class="release_platforms">\n                    <div class="releasedate_div">\n                        <h2 class="releasedate_h2">Platforms</h2>\n                        <h3 class="releasedate_h3">- Test</h3>\n                        <h3 class="releasedate_h3">- Test</h3>\n                    </div>\n\n                    <div class="platforms_div">\n                        <h2 class="releasedate_h2">Genre</h2>\n                        <h3 class="releasedate_h3">- Test</h3>\n                        <h3 class="releasedate_h3">- Test</h3>\n                    </div>\n                </div>\n            </div>\n            <div class="rightsidegameinfo">\n                <img src="Test" class="bigimggame" alt="Avatar">\n            </div>\n        </div>\n        <h2 class="pictures_h2">More pictures :</h2>\n        <div class="pictures_gameinfo">\n            <img src="Test" alt="Avatar">\n            <img src="Test" alt="Avatar">\n            <img src="Test" alt="Avatar">\n            <img src="Test" alt="Avatar">\n            <img src="Test" alt="Avatar">\n            <img src="Test" alt="Avatar">\n        </div>`,s.innerHTML=n}))}))}()}))}),500),async function(){const a=await fetch(`https://api.rawg.io/api/games?key=${e}&metacritic=75,100&dates=2021-11-01,2021-12-01`);return await a.json()}().then((e=>{e.results.forEach((e=>{let a=e.name,t=e.background_image,s=(e.metacritic,e.released),n=document.getElementById("novembergotm"),l="";l+=`<div class="gamesection">\n       <img class="img" src="${t}" alt="Avatar" style="width:100%">\n\n       <div class="gametext">\n            <p class="gametitle"><b class="title game">${a}</b><i class="material-icons bookmark game" id="${e.id}">bookmark_border</i></p>\n             <p><b class="gamerelease">Release date : <b class="allgamereleasedate" id="allgamereleasedate">${s}</b></b></p>\n       </div>\n    </div>\n    `,n.insertAdjacentHTML("beforeend",l)}))})),async function(){const a=await fetch(`https://api.rawg.io/api/games?key=${e}&dates=2021-01-01,2021-12-31&ordering=-added`);return await a.json()}().then((e=>{e.results.forEach((e=>{let a=e.name,t=e.background_image,s=(e.metacritic,e.released),n=document.getElementById("populargames"),l="";l+=`   <div class="gamesection">\n            <img class="img" src="${t}" alt="Avatar" style="width:100%">\n\n            <div class="gametext">\n                <p class="gametitle"><b class="title game">${a}</b><i class="material-icons bookmark game" id="${e.id}">bookmark_border</i></p>\n                <p><b class="gamerelease">Release date : <b class="allgamereleasedate" id="allgamereleasedate">${s}</b></b></p>\n\n            </div>\n\n        </div>`,n.insertAdjacentHTML("beforeend",l)}))})),t().then((e=>{e.results.forEach((e=>{let a=e.name,t=e.background_image,s=(e.metacritic,e.released),n=document.getElementById("allgames"),l="";l+=`<div class="gamesection">\n            <img class="img" src="${t}" alt="Avatar" style="width:100%">\n     \n            <div class="gametext">\n                 <p class="gametitle"><b class="title game">${a}</b><i class="material-icons bookmark game" id="${e.id}">bookmark_border</i></p>\n                  <p><b class="gamerelease">Release date : <b class="allgamereleasedate" id="allgamereleasedate">${s}</b></b></p>\n            </div>\n     \n         </div>`,n.insertAdjacentHTML("beforeend",l)}))})),t().then((e=>{e.results.forEach((e=>{let a=e.name,t=e.background_image,s=(e.metacritic,e.released),n=document.getElementById("allgamescontainer"),l="";l+=`<div class="allgamesection">\n            <img class="img" id="img" src="${t}" alt="Avatar" style="width:100%">\n\n            <div class="allgametext">\n                <p class="allgametitle"><b class="title game" id="title">${a}</b><i class="material-icons bookmark game" id="${e.id}">bookmark_border</i></p>\n                <p><b class="allgamerelease" id="allgamerelease">Release date : <b class="allgamereleasedate" id="allgamereleasedate">${s}</b></b></p>\n\n            </div>\n\n        </div>`,n.insertAdjacentHTML("beforeend",l)}))}))}})();