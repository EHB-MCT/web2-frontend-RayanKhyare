window.onload=function(){!function(){let e=sessionStorage.getItem("userId");fetch(`https://web2-courseproject-rayankhyare.herokuapp.com/users/${e}`,{method:"GET"}).then((e=>e.json())).then((e=>{console.log(e);let t=document.getElementById("profilcontainer"),n="",o=e._id,s=e.firstname,a=e.lastname,l=e.email,i=e.password;n+=` <h2 class="textprofil" id="${o} textprofil">First name : </h2>\n            <h3 class="firstnamestyle" id="firstnamestyle">${s}</h3>\n            <h2 class="textprofil">Last Name : </h2>\n           \n            <h3 class="firstnamestyle" id="lastnamestyle" >${a}</h3>\n          \n            <h2 class="textprofil">Email : </h2>\n            <div class="divEmailEdit">\n            <h3 class="firstnamestyle">${l}</h3> <i class="material-icons updateacc" id="updateacc">create</i>\n            </div>\n            <div class="emailInput">\n\n            <form class="emailChangeForm" id="emailChangeForm">\n            <input type="text" class="emailInputForm" id="emailInputForm" name="email">\n            <button type="submit" class="submitEmailChange" id="submitEmailChange">Change email</button>\n\n            </form>\n            </div>\n            <h2 class="textprofil">Password : </h2>\n            <h3 class="firstnamestyle"><a id="passwordShow">Change password</a></h3>\n            <div class="emailInput">\n\n            <form class="passwordChangeForm" id="passwordChangeForm">\n            <input type="text" class="passwordInputForm" id="passwordInputForm" name="password">\n            <button type="submit" class="submitpasswordChange" id="submitpasswordChange">Change password</button>\n\n            </form>\n            </div>\n\n           \n            `,t.insertAdjacentHTML("afterbegin",n),function(e,t,n){document.getElementById("emailChangeForm").addEventListener("submit",(o=>{console.log(o.target.email),o.preventDefault();let s=sessionStorage.getItem("userId"),a=e;console.log(a);let l=t;console.log(l);let i=o.target.email.value;console.log(i);let r=n;console.log(i);const c={firstname:a,lastname:l,email:i,password:r};fetch(`https://web2-courseproject-rayankhyare.herokuapp.com/users/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((e=>{e.json()})).then((e=>{console.log(e),null==e&&location.reload()}))}))}(s,a,i),function(e,t,n){document.getElementById("passwordChangeForm").addEventListener("submit",(o=>{console.log(o.target.password),o.preventDefault();let s=sessionStorage.getItem("userId"),a=e;console.log(a);let l=t;console.log(l);let i=n;console.log(i);let r=o.target.password.value;console.log(i);const c={firstname:a,lastname:l,email:i,password:r};fetch(`https://web2-courseproject-rayankhyare.herokuapp.com/users/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((e=>{e.json()})).then((e=>{console.log(e),null==e&&location.reload()}))}))}(s,a,l)}))}(),document.getElementById("deleteaccbtn").addEventListener("click",(function(e){console.log("lets gooo"),document.getElementById("deleteaccsure").style.display="block"}));let e=document.getElementById("textprofil");console.log(e),document.getElementById("deleteaccsure").addEventListener("click",(function(e){console.log("lets gooo"),fetch(`https://web2-courseproject-rayankhyare.herokuapp.com/users/${d}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{setTimeout(window.location.reload(),100)})),window.location.href="./index.html"})),document.getElementById("discaccbtn").addEventListener("click",(function(e){sessionStorage.removeItem("userId"),window.location.href="./../index.html"}))};